(()=>{class t{constructor(t=Math){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(let r=0;r<256;r++)this.p[r]=Math.floor(256*t.random());this.perm=[];for(let t=0;t<512;t++)this.perm[t]=this.p[255&t];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(t,r,s){return t[0]*r+t[1]*s}dot3(t,r,s,h){return t[0]*r+t[1]*s+t[2]*h}dot4(t,r,s,h,e){return t[0]*r+t[1]*s+t[2]*h+t[3]*e}noise(t,r){let s,h,e,o,i;let a=.5*(Math.sqrt(3)-1)*(t+r),l=Math.floor(t+a),d=Math.floor(r+a),n=(3-Math.sqrt(3))/6,m=(l+d)*n,p=t-(l-m),M=r-(d-m);p>M?(o=1,i=0):(o=0,i=1);let f=p-o+n,g=M-i+n,u=p-1+2*n,c=M-1+2*n,y=255&l,w=255&d,x=this.perm[y+this.perm[w]]%12,A=this.perm[y+o+this.perm[w+i]]%12,F=this.perm[y+1+this.perm[w+1]]%12,q=.5-p*p-M*M;q<0?s=0:(q*=q,s=q*q*this.dot(this.grad3[x],p,M));let k=.5-f*f-g*g;k<0?h=0:(k*=k,h=k*k*this.dot(this.grad3[A],f,g));let v=.5-u*u-c*c;return v<0?e=0:(v*=v,e=v*v*this.dot(this.grad3[F],u,c)),70*(s+h+e)}noise3d(t,r,s){let h,e,o,i,a,l,d,n,m,p;let M=1/3*(t+r+s),f=Math.floor(t+M),g=Math.floor(r+M),u=Math.floor(s+M),c=1/6*(f+g+u),y=t-(f-c),w=r-(g-c),x=s-(u-c);y>=w?w>=x?(a=1,l=0,d=0,n=1,m=1,p=0):(y>=x?(a=1,l=0,d=0):(a=0,l=0,d=1),n=1,m=0,p=1):w<x?(a=0,l=0,d=1,n=0,m=1,p=1):y<x?(a=0,l=1,d=0,n=0,m=1,p=1):(a=0,l=1,d=0,n=1,m=1,p=0);let A=y-a+1/6,F=w-l+1/6,q=x-d+1/6,k=y-n+1/6*2,v=w-m+1/6*2,z=x-p+1/6*2,P=y-1+1/6*3,C=w-1+1/6*3,H=x-1+1/6*3,I=255&f,S=255&g,b=255&u,j=this.perm[I+this.perm[S+this.perm[b]]]%12,B=this.perm[I+a+this.perm[S+l+this.perm[b+d]]]%12,D=this.perm[I+n+this.perm[S+m+this.perm[b+p]]]%12,E=this.perm[I+1+this.perm[S+1+this.perm[b+1]]]%12,G=.6-y*y-w*w-x*x;G<0?h=0:(G*=G,h=G*G*this.dot3(this.grad3[j],y,w,x));let J=.6-A*A-F*F-q*q;J<0?e=0:(J*=J,e=J*J*this.dot3(this.grad3[B],A,F,q));let K=.6-k*k-v*v-z*z;K<0?o=0:(K*=K,o=K*K*this.dot3(this.grad3[D],k,v,z));let L=.6-P*P-C*C-H*H;return L<0?i=0:(L*=L,i=L*L*this.dot3(this.grad3[E],P,C,H)),32*(h+e+o+i)}noise4d(t,r,s,h){let e,o,i,a,l;let d=this.grad4,n=this.simplex,m=this.perm,p=(5-Math.sqrt(5))/20,M=(Math.sqrt(5)-1)/4*(t+r+s+h),f=Math.floor(t+M),g=Math.floor(r+M),u=Math.floor(s+M),c=Math.floor(h+M),y=(f+g+u+c)*p,w=t-(f-y),x=r-(g-y),A=s-(u-y),F=h-(c-y),q=(w>x?32:0)+(w>A?16:0)+(x>A?8:0)+(w>F?4:0)+(x>F?2:0)+(A>F?1:0),k=n[q][0]>=3?1:0,v=n[q][1]>=3?1:0,z=n[q][2]>=3?1:0,P=n[q][3]>=3?1:0,C=n[q][0]>=2?1:0,H=n[q][1]>=2?1:0,I=n[q][2]>=2?1:0,S=n[q][3]>=2?1:0,b=n[q][0]>=1?1:0,j=n[q][1]>=1?1:0,B=n[q][2]>=1?1:0,D=n[q][3]>=1?1:0,E=w-k+p,G=x-v+p,J=A-z+p,K=F-P+p,L=w-C+2*p,N=x-H+2*p,O=A-I+2*p,Q=F-S+2*p,R=w-b+3*p,T=x-j+3*p,U=A-B+3*p,V=F-D+3*p,W=w-1+4*p,X=x-1+4*p,Y=A-1+4*p,Z=F-1+4*p,$=255&f,_=255&g,tt=255&u,tr=255&c,ts=m[$+m[_+m[tt+m[tr]]]]%32,th=m[$+k+m[_+v+m[tt+z+m[tr+P]]]]%32,te=m[$+C+m[_+H+m[tt+I+m[tr+S]]]]%32,to=m[$+b+m[_+j+m[tt+B+m[tr+D]]]]%32,ti=m[$+1+m[_+1+m[tt+1+m[tr+1]]]]%32,ta=.6-w*w-x*x-A*A-F*F;ta<0?e=0:(ta*=ta,e=ta*ta*this.dot4(d[ts],w,x,A,F));let tl=.6-E*E-G*G-J*J-K*K;tl<0?o=0:(tl*=tl,o=tl*tl*this.dot4(d[th],E,G,J,K));let td=.6-L*L-N*N-O*O-Q*Q;td<0?i=0:(td*=td,i=td*td*this.dot4(d[te],L,N,O,Q));let tn=.6-R*R-T*T-U*U-V*V;tn<0?a=0:(tn*=tn,a=tn*tn*this.dot4(d[to],R,T,U,V));let tm=.6-W*W-X*X-Y*Y-Z*Z;return tm<0?l=0:(tm*=tm,l=tm*tm*this.dot4(d[ti],W,X,Y,Z)),27*(e+o+i+a+l)}}onmessage=function(r){let{chunkPosition:s,chunkSize:h,instanceCount:e}=r.data;new t;let o=new Float32Array(3*e),i=new Float32Array(2*e),a=new Float32Array(9*e),l=new Float32Array(e),d=new Float32Array(e);for(let t=0;t<e;t++){var n,m,p,M,f,g,u,c;o[3*t]=s.x+Math.random()*h,o[3*t+2]=s.y+Math.random()*h,o[3*t+1]=0,i[t]=[(n=o[3*t],m=s.x,p=s.x+h,M=0+h,(n-m)*(s.x/h-M)/(p-m)+M)],i[t+2]=[(f=o[3*t+2],g=s.y,u=s.y+h,c=0+h,(f-g)*(s.y/h-c)/(u-g)+c)];let r=Math.random()*Math.PI*2,e=Math.cos(r),y=Math.sin(r),w=9*t;a[w+0]=e,a[w+1]=0,a[w+2]=-y,a[w+3]=0,a[w+4]=1,a[w+5]=0,a[w+6]=y,a[w+7]=0,a[w+8]=e,l[t]=2*Math.random()+3.5,d[t]=(l[t]-2)/3.5}postMessage({offsets:o,uvs:i,rotationMatrices:a,scales:l,normalizedHeight:d})}})();
//# sourceMappingURL=worker.f94b5f94.js.map
